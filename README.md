# API 문서

## 개요
이 문서는 백엔드 서비스의 `main.py` 파일에 있는 API 엔드포인트에 대한 개요를 제공합니다. 이 서비스는 FastAPI로 구축되었으며, 제목 생성, 북마크 일괄 처리, 서비스 상태 확인 기능을 제공합니다.

## 엔드포인트
### 0. 서버 IP
http://54.196.39.51:8000 (/generate_title) -> 예시

### 1. 제목 생성
- **URL**: `/generate_title`
- **메서드**: POST
- **요청 본문**:
  - `title` (string): 기존 제목.
  - `summary` (string): 제목을 생성할 요약문.
- **응답**:
  - `title` (string): 제공된 요약문과 제목을 기반으로 생성된 제목. `{"title":"다국어 악성 패키지"}`
- **설명**: 이 엔드포인트는 요약문과 기존 제목을 입력으로 받아 동일한 언어로 간결하고 적절한 제목을 반환합니다. **제목에 더 많은 가중치를 두어 생성합니다.**

#### 프롬프트 설명
이 프롬프트는 주어진 요약문과 제목을 기반으로, 동일한 언어로 간결하고 적절한 제목을 생성하도록 설계되었습니다. 특히, 제목에 더 많은 가중치를 두어 생성합니다. 프롬프트는 다음과 같은 규칙을 따릅니다:
- 요약문과 제목의 언어를 감지하여 동일한 언어로 응답합니다.
- 1‒8개의 완전한 어절만 사용하며, 어절을 중간에 끊지 않습니다.
- 출력은 한 줄로, 마침표·따옴표·쉼표 없이 작성됩니다.
- **max_tokens**: 15

### 2. 북마크 일괄 처리
- **URL**: `/cluster`
- **메서드**: POST
- **요청 본문**:
  - `items` (list of objects): 각 객체는 `id` (integer), `title` (string), `summary` (string) 필드를 포함해야 합니다.
- **응답**:
  - `clusters` (list of objects): 각 객체는 `id` (integer)와 `cluster` 번호 (integer)를 포함합니다.
  - `categories` (dictionary): 각 클러스터 ID에 대한 생성된 카테고리 제목을 포함합니다. 예를 들어, `"categories":{"0":"여행 및 리뷰", ...}`와 같이 클러스터 ID와 해당 카테고리 제목이 쌍으로 제공됩니다.
- **설명**:  
  입력된 원본 북마크 제목과 요약을 바탕으로,  
  1) 입력된 제목과 요약을 결합하여 텍스트를 생성하고,  
  2) 이 텍스트를 임베딩하고 표준화한 후 PCA와 UMAP을 사용하여 차원을 축소하며,  
  3) HDBSCAN을 사용하여 클러스터링을 수행하고,  
  4) 각 클러스터에 대해 GPT로 대표 카테고리 제목을 생성하는 통합 API입니다.  
  각 북마크는 `id`로 구분되며, 응답에는 각 `id`에 대한 클러스터 정보와 클러스터 ID에 대한 카테고리 제목이 포함됩니다.

#### 프롬프트 설명
이 프롬프트는 각 클러스터에 대해 적절한 카테고리 제목을 생성하도록 설계되었습니다. 프롬프트는 다음과 같은 규칙을 따릅니다:
- 각 클러스터의 요약과 제목을 결합하여 텍스트를 생성합니다.
- 1‒4개의 완전한 명사 어절만 사용하며, 단어를 중간에 자르지 않습니다.
- 구두점·따옴표·괄호 없이 한국어로 작성됩니다.
- 결과는 '카테고리명' 한 줄만 출력됩니다.
- **max_tokens**: 15

### 3. 헬스 체크
- **URL**: `/health-check`
- **메서드**: GET
- **응답**:
  - `status` (string): 서비스가 실행 중임을 나타내는 간단한 상태 메시지 (예: "ok").
- **설명**: 이 엔드포인트는 서비스의 상태를 확인하는 데 사용됩니다.


## 테스트
1. curl -Xgenerate_title" -H "Content-Type: application/json" -d"'{"title": "트랜스포머 기반 탐지", "summary": "이 논문은 트랜스포머 기반 다국어 악성 패키지 탐지 방법을 제안한다."}'
2. curl -X POST "http://54.196.39.51:8000/cluster" -H "Content-Type: application/json" -d '{"items":[{"id":1,"title":"보안 캠페인 출시","summary":"GitHub의 보안 캠페인 기능으로 개발자-보안 전문가 협업 강화 및 AI 기반 보안 부채 해결 지원"},{"id":2,"title":"AB180 성장기","summary":"AB180 인턴십 → 정규직 성장 경험과 엔지니어링 문화 공유"},{"id":3,"title":"바이브코딩 한계","summary":"바이브코딩과 객체지향 프로그래밍 간 충돌 및 한계 설명"},{"id":4,"title":"DDD 헥사고날 사례","summary":"지그재그 서비스에 적용한 DDD 헥사고날 아키텍처 소개"},{"id":5,"title":"터미널 함수 25","summary":"리눅스/윈도우 유용 터미널 명령어 25선 정리"},{"id":6,"title":"UX 포트폴리오 작성","summary":"디자인 철학과 데이터 기반 UX 포트폴리오 작성법"},{"id":7,"title":"하나에 집중하기","summary":"UX 라이팅에서 하나의 메시지에 집중하는 전략"},{"id":8,"title":"심미성 vs 사용성","summary":"심미성과 사용성 균형 사례 소개"},{"id":9,"title":"B2B 디자인 인사이트","summary":"B2B SaaS 제품 디자인 경험과 인사이트 공유"},{"id":10,"title":"Ai 감성 쇼핑","summary":"11번가 Ai Feed 기반 감성적 쇼핑 경험 소개"},{"id":11,"title":"서울 테마별 여행 코스","summary":"서울의 다양한 테마별 명소 추천"},{"id":12,"title":"서울 2박3일 여행 코스","summary":"전통과 현대를 아우르는 2박 3일 코스+맛집/숙소 정보"},{"id":13,"title":"신라스테이 서울 2박3일","summary":"신라스테이 숙소 중심 2박3일 서울 여행기"},{"id":14,"title":"서울 필수 여행 10선","summary":"서울 전통과 현대 필수 명소 10곳 추천"},{"id":15,"title":"서울 여행 올인원 가이드","summary":"서울 관광명소, 음식, 숙박, 교통 완벽 가이드"},{"id":16,"title":"COS 미니백&H&M 세일","summary":"COS 미니백 착용 후기 및 H&M 세일 구매기"},{"id":17,"title":"엘리 쇼핑리뷰 모음","summary":"생활용품/가전제품 쇼핑 리뷰 모음"},{"id":18,"title":"만다리나덕 백팩 리뷰","summary":"만다리나덕 여성 백팩 할인 구매 후기"},{"id":19,"title":"쌤소나이트 에텔 백팩 리뷰","summary":"쌤소나이트 에텔 백팩 특징 및 추천"},{"id":20,"title":"20대30대 여성 데일리백","summary":"20~30대 여성용 데일리 백 추천"},{"id":21,"title":"DFS vs BFS 선택 기준 정리","summary":"그래프 탐색 시 DFS/BFS 선택 기준 설명"},{"id":22,"title":"DP 문제 총정리 및 구현 예시","summary":"DP 개념 및 다양한 구현 예시 소개"},{"id":23,"title":"백트래킹 연습 문제 모음","summary":"백트래킹 개념과 실전 연습 문제 모음"},{"id":24,"title":"2024 카카오 인턴십 코딩테스트 해설","summary":"2024 카카오 인턴십 코딩테스트 문제 해설"},{"id":25,"title":"알고리즘 스터디 저장소","summary":"GitHub 기반 알고리즘 문제풀이 저장소"},{"id":26,"title":"위플래쉬: 천재는 행복한가","summary":"위플래쉬를 통해 천재성과 행복의 관계를 고찰"},{"id":27,"title":"혹성탈출: 새로운 시대 리뷰","summary":"리부트 시리즈 4편, 유인원 노아 성장기"},{"id":28,"title":"어바웃 타임: 시간의 소중함","summary":"시간여행 소재로 일상의 소중함을 강조"},{"id":29,"title":"포레스트 검프: 순수함의 힘","summary":"포레스트의 순수함을 통한 인생 가치 전달"},{"id":30,"title":"기생충: 계급사회의 민낯","summary":"현대 계급사회를 다룬 영화 기생충 리뷰"}]}'